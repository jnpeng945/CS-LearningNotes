[TOC]

# 第三篇（16 ~ 17）

如何从系统的角度优化和监测服务器性能。服务器程序的调试和测试，常用系统监测工具的使用。





























---

提高服务器程序性能的一般原则：

- 使用 “池” 以牺牲空间换取效率；
- 使用零拷贝函数以避免内核和用户空间的切换；
- 高效的编程模式及其应用：使用有限状态机来分析用户数据，使用进程池或线程池来处理用户请求；
- 调整系统参数来从服务器程序外部提高其整体性能。

实例：第15章 利用进程池实现的简单 CGI 服务器和用线程池实现的简单 Web 服务器。

作者写的负载均衡服务器程序 springsnail ，该程序从所有逻辑服务器中选取负荷最小的一台来处理新到的客户连接。这个程序中，使用了进程池、有限状态机、高效的数据结构来提高性能；同时，封装了每个函数和模块，使其符合实际工程项目。

